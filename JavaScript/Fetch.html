<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Fetch </title>
</head>

<body>

    <form id="myForm">
        Title <input type="text" id="titleText">
        <br><br>
        Body <input type="text" id="bodyText">
        <br><br>
        User Id
        <input type="text" id="userid">
        <br><br>
        <input type="submit" id="saveForm">
    </form>

    <!-- LocaL FILE 
        <script>
        fetch("/CheckingAjax.txt").then((response) => response.text())
            .then((data) => {
                // console.log(data);
                document.write(data);
            })
    </script> -->
    <!-- Fake Data 
    <script>  
        fetch("https://jsonplaceholder.typicode.com/users").then((response) => response.json())
            .then((data) => {
                // console.log(data);
                //console.log(data);

                for( var x in data) {
                    // document.write(x);
                    document.write(`${data[x].name} - ${data[x].email}  <br> `);
                }

            }).catch( (error) => document.write("Error"));
    </script>
    -->
    <!--   OWN Json Data 
    <script>
        fetch("/students_data.json").then((response) => response.json())
            .then((data) => {
                // console.log(data);
                // document.write(data);

                for( var x in data ) {
                    var a = ` ${data[x].name}  -  ${data[x].city}  -  ${data[x].age }  <br>  `;
                    document.write(a);
                }
            })
    </script>
    -->

    <script>

        if(window.fetch){
            { Code Here }
        }
        else{
            //Browser jo support nai krta 
        }

        /* //Inserting a value
        var obj = {
            title: 'foo',
            body: 'bar',
            userId: 1,
        }
        fetch('https://jsonplaceholder.typicode.com/posts', {
            method: 'POST',
            body: JSON.stringify(
                // {
                // title: 'foo',
                // body: 'bar',
                // userId: 1,
                // } 
                obj
            ),
            headers: {
                'Content-type': 'application/json; charset=UTF-8',
            },
        })
            .then((response) => response.json())
            .then((json) => console.log(json));
             */

        /* //To Update Data
        fetch('https://jsonplaceholder.typicode.com/posts/1' ){
            method : "PUT",
            body: JSON.stringify( obj ),
            headers: {
            'Content-type': 'application/json; charset=UTF-8',
        },
    })
        .then((response) => response.json())
        .then((json) => console.log(json));
        }
*/

        /*//To Delete Data
                fetch('https://jsonplaceholder.typicode.com/posts/1' ){
                    method : "DELETE"
                } */


        document.getElementById("saveForm").addEventListener('click', function (e) {
            e.preventDefault();
            /*  In JSON Form
            var obj = 
            {
                title: document.getElementById("titleText").value,
                body: document.getElementById("bodyText").value,
                userId: document.getElementById("userid").value,
            }
            fetch('https://jsonplaceholder.typicode.com/posts', {
                method: 'POST',
                body: JSON.stringify(
                    // {
                    // title: 'foo',
                    // body: 'bar',
                    // userId: 1,
                    // } 
                    obj
                ),
                headers: {
                    'Content-type': 'application/json; charset=UTF-8',
                },
            })
                .then((response) => response.json())
                .then((json) => console.log(json));
        }) */
            //In Form Form

            fetch('https://jsonplaceholder.typicode.com/posts', {
                method: 'POST',
                body: new FormData(document.getElementById("myForm")),
                headers: {
                    'Content-type': 'application/x-www-form-urlencoded ',
                },
            })
                .then((response) => response.json())
                .then((json) => console.log(json));
        })


    </script>

</body>

</html>